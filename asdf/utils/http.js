"use strict";function request(e,t,o,n,a){a?wx.request({url:t,data:{query:"query{apicode{code,expires_in}}"},header:header,method:"POST",success:function(a){var r=a.data.errors;if(r)return wx.showToast({title:r[0].message,icon:"none"}),!1;wx.request({url:t,data:o,header:Object.assign({},header,{mts:a.data.data.apicode.code}),method:e,success:function(e){"function"==typeof n&&n(e)},fail:function(e){return wx.showModal({title:"网络错误",content:"网络出错，请刷新重试",showCancel:!1}),"function"==typeof n&&n(!1)}})},fail:function(e){return wx.showModal({title:"网络错误",content:"网络出错，请刷新重试",showCancel:!1}),"function"==typeof n&&n(!1)}}):wx.request({url:t,data:o,header:header,method:e,success:function(e){"function"==typeof n&&n(e)},fail:function(e){return wx.showModal({title:"网络错误",content:"网络出错，请刷新重试",showCancel:!1}),"function"==typeof n&&n(!1)}})}var header={"content-type":"application/json",Authorization:null,platform:"",version:"",device:"",Duuid:wx.getStorageSync("uuid")};module.exports={request:request,header:header};