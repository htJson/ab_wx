"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var _monthCalculator=require("./month-calculator"),_monthCalculator2=_interopRequireDefault(_monthCalculator);Component({properties:{show:{type:Boolean,value:!1},current:{type:Number,value:0},currentDate:{type:String,value:""},startDate:{type:String,value:"",observer:function(t,e){this._getTotalMonth()}},endDate:{type:String,value:"",observer:function(t,e){this._getTotalMonth()}}},ready:function(){this._getTotalMonth(),this._setSwiperHeight()},methods:{change:function(t){var e=t.detail.current;this.setData({current:e}),this._setSwiperHeight()},changeToPrev:function(t){var e=this.data.current;e--,e<0&&(e=0),this.setData({current:e})},changeToNext:function(t){var e=this.data,a=e.current,n=e.months;a++,a>=n.length&&(a=n.length-1),this.setData({current:a})},changeToToday:function(t){var e=this.data,a=(e.current,e.currentDate,e.todayMonthIndex),n=e.todayDate;this.setData({current:a,currentDate:n}),this.triggerEvent("change",{currentDate:n})},tapMask:function(){this.setData({show:!1})},tapDate:function(t){var e=this.data,a=(e.current,e.currentDate,e.todayMonthIndex,e.todayDate,t.target.dataset);a.disabled||(this.setData({currentDate:a.datestr}),this.triggerEvent("change",{currentDate:a.datestr}))},_getTotalMonth:function(){var t=this.properties,e=t.startDate,a=t.endDate,n=new _monthCalculator2.default({startDate:e,endDate:a}),r=n.getTotal(),o=n.getToday(),i={};o&&(i.showTodayBtn=!0,i.todayMonthIndex=o.monthIndex,i.todayDate=o.date),i.months=r,this.setData(i)},_setSwiperHeight:function(){var t=this;wx.createSelectorQuery().in(this).selectAll(".weapp-calendar-picker-month").boundingClientRect(function(e){var a=t.data.current,n=e[a];if(n&&n.height){var r=n.height+30+"px";t.setData({swiperHeight:r})}}).exec()}}});